# {{ ansible_managed }}
# ~/.zshrc - managed by flux

export ZSH="$HOME/.oh-my-zsh"

ZSH_THEME=""

plugins=(
    git
    zsh-autosuggestions
    zsh-syntax-highlighting
    docker
    command-not-found
)

source $ZSH/oh-my-zsh.sh

# User configuration
export EDITOR='vim'
export LANG=en_US.UTF-8

# Go
if [ -d /usr/local/go/bin ]; then
    export PATH=$PATH:/usr/local/go/bin
    export PATH=$PATH:$(go env GOPATH)/bin
fi

{% if install_podman | default(false) | bool %}
# Podman Desktop connection (Windows â†’ WSL)
# Prefer rootless socket; fall back to rootful
if [ -S /mnt/wsl/podman-sockets/podman-machine-default/podman-user.sock ]; then
    export CONTAINER_HOST=unix:///mnt/wsl/podman-sockets/podman-machine-default/podman-user.sock
elif [ -S /mnt/wsl/podman-sockets/podman-machine-default/podman-root.sock ]; then
    export CONTAINER_HOST=unix:///mnt/wsl/podman-sockets/podman-machine-default/podman-root.sock
fi

# Docker backwards-compatibility aliases
alias docker="podman"
alias docker-compose="podman-compose"
{% endif %}

# Bun
if [ -d "$HOME/.bun/bin" ]; then
    export PATH="$HOME/.bun/bin:$PATH"
fi

# Local bin
export PATH="$HOME/.local/bin:$PATH"

# Starship prompt (must be at end)
eval "$(starship init zsh)"
